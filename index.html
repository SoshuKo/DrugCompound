<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ドゥルグ語複合名詞作成機</title>
    <script>
    function createCompoundNoun() {
        const wordA = document.getElementById("wordA").value;
        const wordB = document.getElementById("wordB").value;
        const nounType = document.getElementById("nounType").value;
        const aspect = document.getElementById("aspect").value;
        const plural = document.getElementById("plural").checked;
        const singleWord = document.getElementById("singleWord").checked;

        const femaleVowels = ['i', 'ü', 'e', 'ö'];
        const maleVowels = ['ï', 'u', 'ë', 'o'];
        const femaleReplacement = { 'ï': 'i', 'u': 'ü', 'ë': 'e', 'o': 'ö' };
        const maleReplacement = { 'i': 'ï', 'ü': 'u', 'e': 'ë', 'ö': 'o' };

        function replaceVowels(word, replacement) {
            return word.split('').map(char => replacement[char] || char).join('');
        }

        // 名詞+名詞
        if (nounType === "名詞+名詞") {
            if (!plural) {
                if (femaleVowels.some(v => wordB.includes(v))) {
                    wordA = replaceVowels(wordA, femaleReplacement) + 'nü';
                } else if (maleVowels.some(v => wordB.includes(v))) {
                    wordA = replaceVowels(wordA, maleReplacement) + 'nu';
                } else {
                    wordA += 'nu';
                }
            } else {
                if (femaleVowels.some(v => wordB.includes(v))) {
                    wordA = replaceVowels(wordA, femaleReplacement) + "'ün";
                    wordB += "'ü";
                } else if (maleVowels.some(v => wordB.includes(v))) {
                    wordA = replaceVowels(wordA, maleReplacement) + "'un";
                    wordB += "'u";
                } else {
                    wordA += "'un";
                    wordB += "'u";
                }
            }
        }
        // 形容詞/自動詞分詞+名詞
        else if (nounType === "形容詞/自動詞分詞+名詞") {
            wordA = replaceVowels(wordA, femaleVowels.some(v => wordB.includes(v)) ? femaleReplacement : maleReplacement);

            if (!plural) {
                wordA = wordA.replace(/-um|-üm/g, match => match === '-um' ? (aspect === "未完了相" ? 'du' : 'dru') : (aspect === "未完了相" ? 'dü' : 'drü'));
            } else {
                wordA = wordA.replace(/-um|-üm/g, match => match === '-um' ? (aspect === "未完了相" ? 'dulu' : 'dullu') : (aspect === "未完了相" ? 'dülü' : 'düllü'));
                if (femaleVowels.some(v => wordB.includes(v))) {
                    wordB += "'ü";
                } else {
                    wordB += "'u";
                }
            }
        }
        // 他動詞分詞+名詞
        else if (nounType === "他動詞分詞+名詞") {
            wordA = replaceVowels(wordA, femaleVowels.some(v => wordB.includes(v)) ? femaleReplacement : maleReplacement);

            if (!plural) {
                wordA = wordA.replace(/-am/g, match => {
                    if (maleVowels.some(v => wordA.includes(v))) return aspect === "未完了相" ? 'gu' : 'gru';
                    if (femaleVowels.some(v => wordA.includes(v))) return aspect === "未完了相" ? 'gü' : 'grü';
                    return aspect === "未完了相" ? 'gu' : 'gru';
                });
            } else {
                wordA = wordA.replace(/-am/g, match => {
                    if (maleVowels.some(v => wordA.includes(v))) return aspect === "未完了相" ? 'gulu' : 'gullu';
                    if (femaleVowels.some(v => wordA.includes(v))) return aspect === "未完了相" ? 'gülü' : 'güllü';
                    return aspect === "未完了相" ? 'gulu' : 'gullu';
                });
                if (femaleVowels.some(v => wordB.includes(v))) {
                    wordB += "'i";
                } else {
                    wordB += "'u";
                }
            }
        }

        let result = singleWord ? wordA + wordB : wordA + " " + wordB;
        document.getElementById("result").innerText = result;
        if (result.length > 15) {
            document.getElementById("recommendation").innerText = "「一語にする」を推奨します。";
        } else {
            document.getElementById("recommendation").innerText = "";
        }
    }
    </script>
</head>
<body>
    <h1>ドゥルグ語複合名詞作成機</h1>
    <p>名詞の場合は単数形・主格を、動詞・形容詞の場合は不定形を入力してください（=辞書に載っている形を入力してください）。</p>
    <p>自動詞とは辞書形の語尾が-um, -üm、他動詞とは辞書形の語尾が-amのものです。</p>
    <label for="wordA">単語A:</label>
    <input type="text" id="wordA">
    <br>
    <label for="wordB">単語B:</label>
    <input type="text" id="wordB">
    <br>
    <label for="nounType">複合名詞のタイプ:</label>
    <select id="nounType">
        <option value="名詞+名詞">名詞+名詞</option>
        <option value="形容詞/自動詞分詞+名詞">形容詞/自動詞分詞+名詞</option>
        <option value="他動詞分詞+名詞">他動詞分詞+名詞</option>
    </select>
    <br>
    <label for="aspect">相:</label>
    <select id="aspect">
        <option value="未完了相">未完了相</option>
        <option value="完了相">完了相</option>
    </select>
    <br>
    <label for="plural">複数形:</label>
    <input type="checkbox" id="plural">
    <br>
    <label for="singleWord">1語にする:</label>
    <input type="checkbox" id="singleWord">
    <br>
    <button onclick="createCompoundNoun()">生成</button>
    <h2>結果:</h2>
    <p id="result"></p>
    <p id="recommendation" style="color:red;"></p>
</body>
</html>
